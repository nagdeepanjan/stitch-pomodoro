<!DOCTYPE html>

<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Pomodoro Focus Timer</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#b22222",
                        "accent": "#ffd700",
                        "background-light": "#fff5f5",
                        "background-dark": "#1a0505",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
<style>
        .timer-ring {
            transition: stroke-dashoffset 0.35s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
    </style>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-slate-100 min-h-screen flex flex-row"><!-- Desktop Sidebar -->
<aside class="hidden md:flex flex-col w-64 border-r border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-background-dark/50 p-6 h-screen sticky top-0">
<div class="flex items-center gap-3 mb-10 px-2">
<div class="w-8 h-8 bg-accent rounded-lg flex items-center justify-center">
<span class="material-symbols-outlined text-background-dark">timer</span>
</div>
<span class="font-bold text-xl tracking-tight">ZenFocus</span>
</div>
<div class="mt-auto">
<div class="p-4 bg-slate-100 dark:bg-slate-900/50 rounded-2xl border border-slate-200 dark:border-slate-800">
<div class="flex items-center justify-between mb-4">
<span class="text-xs font-bold uppercase tracking-wider text-slate-500">Audio Settings</span>
<span class="material-symbols-outlined text-slate-400 text-sm">volume_up</span>
</div>
<div class="flex items-center justify-between">
<span class="text-sm font-semibold">Clock Ticks</span>
<label class="relative inline-flex items-center cursor-pointer">
<input checked="" class="sr-only peer" id="desktop-audio-toggle" type="checkbox" value=""/>
<div class="w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-800 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-primary"></div>
</label>
</div>
</div>
</div>
</aside>
<!-- Main Content -->
<div class="flex-1 flex flex-col items-center overflow-y-auto pb-12">
<header class="w-full max-w-4xl flex flex-col items-center gap-2 mt-8 md:mt-12">
<div class="flex items-center gap-2 px-4 py-1.5 rounded-full bg-primary/10 border border-primary/20" id="mode-badge">
<span class="flex h-2 w-2 rounded-full bg-primary animate-pulse"></span>
<span class="text-primary text-xs font-bold uppercase tracking-widest" id="mode-badge-text">Focus Session</span>
</div>
<h1 class="text-3xl md:text-4xl font-bold tracking-tight mt-2" id="mode-title">Deep Work</h1>
</header>
<main class="relative flex flex-col items-center justify-center w-full max-w-4xl py-8 md:py-16">
<div class="relative flex items-center justify-center">
<svg class="w-72 h-72 md:w-96 md:h-96">
<circle class="md:cx-192 md:cy-192 md:r-180" cx="144" cy="144" fill="transparent" r="135" stroke="currentColor" stroke-width="8"></circle>
<circle class="md:cx-192 md:cy-192 md:r-180 text-primary" cx="144" cy="144" fill="transparent" id="progress-ring" r="135" stroke="currentColor" stroke-dasharray="848" stroke-dashoffset="212" stroke-linecap="round" stroke-width="8"></circle>
</svg>
<style>
                @media (min-width: 768px) {
                    svg.md\:w-96 { width: 384px; height: 384px; }
                    svg.md\:w-96 circle { cx: 192; cy: 192; r: 180; }
                    #progress-ring { stroke-dasharray: 1131; }
                }
            </style>
<div class="absolute flex flex-col items-center">
<span class="text-7xl md:text-8xl font-light tracking-tighter" id="timer-display">25:00</span>
<span class="text-slate-400 dark:text-slate-500 text-sm md:text-base font-medium mt-1">minutes remaining</span>
</div>
</div>
</main>
<section class="w-full max-w-2xl grid grid-cols-1 md:grid-cols-3 gap-4 mb-10 px-6">
<div class="bg-slate-100 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 p-4 rounded-2xl flex flex-col items-center gap-3 hover:border-primary/30 transition-colors group cursor-pointer">
<span class="text-[11px] uppercase font-bold text-slate-500 tracking-wider group-hover:text-primary transition-colors">Focus Time</span>
<div class="flex items-center gap-4">
<button class="text-slate-400 hover:text-primary hover:bg-primary/10 rounded-lg p-1 transition-all" id="focus-minus">
<span class="material-symbols-outlined">remove</span>
</button>
<span class="font-bold text-2xl w-8 text-center" id="focus-val">25</span>
<button class="text-slate-400 hover:text-primary hover:bg-primary/10 rounded-lg p-1 transition-all" id="focus-plus">
<span class="material-symbols-outlined">add</span>
</button>
</div>
</div>
<div class="bg-slate-100 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 p-4 rounded-2xl flex flex-col items-center gap-3 hover:border-accent/30 transition-colors group cursor-pointer">
<span class="text-[11px] uppercase font-bold text-slate-500 tracking-wider group-hover:text-accent transition-colors">Short Break</span>
<div class="flex items-center gap-4">
<button class="text-slate-400 hover:text-accent hover:bg-accent/10 rounded-lg p-1 transition-all" id="short-minus">
<span class="material-symbols-outlined">remove</span>
</button>
<span class="font-bold text-2xl w-8 text-center" id="short-val">05</span>
<button class="text-slate-400 hover:text-accent hover:bg-accent/10 rounded-lg p-1 transition-all" id="short-plus">
<span class="material-symbols-outlined">add</span>
</button>
</div>
</div>
<div class="bg-slate-100 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 p-4 rounded-2xl flex flex-col items-center gap-3 hover:border-accent/30 transition-colors group cursor-pointer">
<span class="text-[11px] uppercase font-bold text-slate-500 tracking-wider group-hover:text-accent transition-colors">Long Break</span>
<div class="flex items-center gap-4">
<button class="text-slate-400 hover:text-accent hover:bg-accent/10 rounded-lg p-1 transition-all" id="long-minus">
<span class="material-symbols-outlined">remove</span>
</button>
<span class="font-bold text-2xl w-8 text-center" id="long-val">15</span>
<button class="text-slate-400 hover:text-accent hover:bg-accent/10 rounded-lg p-1 transition-all" id="long-plus">
<span class="material-symbols-outlined">add</span>
</button>
</div>
</div>
</section>
<section class="w-full max-w-md flex items-center gap-4 px-6">
<button class="flex-1 bg-primary text-white font-bold py-5 rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-primary/20 hover:brightness-110 active:scale-95 transition-all" id="start-btn">
<span class="material-symbols-outlined">play_arrow</span>
            Start Session
        </button>
<button class="px-8 py-5 bg-slate-200 dark:bg-slate-800 text-slate-700 dark:text-slate-300 font-bold rounded-2xl flex items-center justify-center hover:bg-slate-300 dark:hover:bg-slate-700 active:scale-95 transition-all" id="reset-btn">
<span class="material-symbols-outlined">restart_alt</span>
</button>
</section>
<footer class="w-full max-w-4xl flex items-center justify-between pt-8 mt-auto px-6 border-t border-slate-200 dark:border-slate-800 md:hidden">
<div class="flex items-center gap-3">
<div class="bg-primary/10 p-2 rounded-lg">
<span class="material-symbols-outlined text-primary">volume_up</span>
</div>
<div class="flex flex-col">
<span class="text-sm font-semibold">Clock Ticks</span>
<span class="text-[10px] text-slate-50 text-slate-500 uppercase font-bold">Ambient Audio</span>
</div>
</div>
<label class="relative inline-flex items-center cursor-pointer">
<input checked="" class="sr-only peer" id="audio-toggle" type="checkbox" value=""/>
<div class="w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-800 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"></div>
</label>
</footer>
</div><script>
    const timerDisplay = document.getElementById('timer-display');
    const progressRing = document.getElementById('progress-ring');
    const startBtn = document.getElementById('start-btn');
    const resetBtn = document.getElementById('reset-btn');

    const focusVal = document.getElementById('focus-val');
    const shortVal = document.getElementById('short-val');
    const longVal = document.getElementById('long-val');

    let timerInterval;
    let isRunning = false;
    let bellTimeout = null;

    function playBellSound() {
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const duration = 5;
        const bellStrikes = [0, 0.8, 1.6, 2.4, 3.2];

        bellStrikes.forEach((strikeTime) => {
            const partials = [
                { freq: 830, gain: 0.6 },
                { freq: 1245, gain: 0.4 },
                { freq: 1665, gain: 0.25 },
                { freq: 2080, gain: 0.15 },
                { freq: 2510, gain: 0.1 },
            ];

            partials.forEach((partial) => {
                const osc = audioCtx.createOscillator();
                const gainNode = audioCtx.createGain();
                osc.type = 'sine';
                osc.frequency.value = partial.freq;
                gainNode.gain.setValueAtTime(partial.gain * 0.3, audioCtx.currentTime + strikeTime);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + strikeTime + 1.4);
                osc.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                osc.start(audioCtx.currentTime + strikeTime);
                osc.stop(audioCtx.currentTime + strikeTime + 1.5);
            });
        });

        if (bellTimeout) clearTimeout(bellTimeout);
        bellTimeout = setTimeout(() => {
            audioCtx.close();
            bellTimeout = null;
        }, (duration + 0.5) * 1000);
    }
    const modeBadgeText = document.getElementById('mode-badge-text');
    const modeTitle = document.getElementById('mode-title');
    const audioToggle = document.getElementById('audio-toggle');
    const desktopAudioToggle = document.getElementById('desktop-audio-toggle');

    const modeConfig = {
        focus: { badge: 'Focus Session', title: 'Deep Work' },
        short: { badge: 'Short Break', title: 'Take a Breather' },
        long:  { badge: 'Long Break',  title: 'Recharge' },
    };

    // Sync the two audio toggles
    if (audioToggle && desktopAudioToggle) {
        audioToggle.addEventListener('change', () => { desktopAudioToggle.checked = audioToggle.checked; });
        desktopAudioToggle.addEventListener('change', () => { audioToggle.checked = desktopAudioToggle.checked; });
    }

    function isTickEnabled() {
        if (audioToggle) return audioToggle.checked;
        if (desktopAudioToggle) return desktopAudioToggle.checked;
        return false;
    }

    // Clock tick using Web Audio API
    let tickAudioCtx = null;
    function playTickSound() {
        if (!isTickEnabled()) return;
        if (!tickAudioCtx || tickAudioCtx.state === 'closed') {
            tickAudioCtx = new (window.AudioContext || window.webkitAudioContext)();
        }
        const ctx = tickAudioCtx;
        if (ctx.state === 'suspended') ctx.resume();

        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.type = 'sine';
        osc.frequency.value = 800;
        gain.gain.setValueAtTime(0.08, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.06);
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.start(ctx.currentTime);
        osc.stop(ctx.currentTime + 0.06);
    }

    function updateModeDisplay() {
        const config = modeConfig[currentMode];
        modeBadgeText.textContent = config.badge;
        modeTitle.textContent = config.title;

        // Mode badge
        const modeBadge = document.getElementById('mode-badge');
        const badgeDot = modeBadge.querySelector('span:first-child');

        if (currentMode === 'focus') {
            modeBadge.classList.remove('bg-accent/10', 'border-accent/20');
            modeBadge.classList.add('bg-primary/10', 'border-primary/20');
            badgeDot.classList.remove('bg-accent');
            badgeDot.classList.add('bg-primary');
            modeBadgeText.classList.remove('text-accent');
            modeBadgeText.classList.add('text-primary');
        } else {
            modeBadge.classList.remove('bg-primary/10', 'border-primary/20');
            modeBadge.classList.add('bg-accent/10', 'border-accent/20');
            badgeDot.classList.remove('bg-primary');
            badgeDot.classList.add('bg-accent');
            modeBadgeText.classList.remove('text-primary');
            modeBadgeText.classList.add('text-accent');
        }

        // Timer ring
        if (currentMode === 'focus') {
            progressRing.classList.remove('text-accent');
            progressRing.classList.add('text-primary');
        } else {
            progressRing.classList.remove('text-primary');
            progressRing.classList.add('text-accent');
        }

        // Start button
        const startBtn = document.getElementById('start-btn');
        if (currentMode === 'focus') {
            startBtn.classList.remove('bg-accent', 'text-background-dark', 'shadow-accent/20');
            startBtn.classList.add('bg-primary', 'text-white', 'shadow-primary/20');
        } else {
            startBtn.classList.remove('bg-primary', 'text-white', 'shadow-primary/20');
            startBtn.classList.add('bg-accent', 'text-background-dark', 'shadow-accent/20');
        }

        // Update card highlights
        document.querySelectorAll('section.grid > div').forEach(el => {
            el.classList.remove('border-primary', 'border-accent', 'bg-primary/10', 'bg-accent/10', 'ring-1', 'ring-primary', 'ring-accent');
            el.classList.add('border-slate-200', 'dark:border-slate-800');
            const label = el.querySelector('span');
            if (label) {
                label.classList.remove('text-primary', 'text-accent');
                label.classList.add('text-slate-500');
            }
        });
        const activeCard = document.getElementById(`${currentMode}-val`);
        if (activeCard) {
            const container = activeCard.closest('.group');
            container.classList.remove('border-slate-200', 'dark:border-slate-800');
            const label = container.querySelector('span');

            if (currentMode === 'focus') {
                container.classList.add('border-primary', 'bg-primary/10', 'ring-1', 'ring-primary');
                if (label) {
                    label.classList.remove('text-slate-500');
                    label.classList.add('text-primary');
                }
            } else {
                container.classList.add('border-accent', 'bg-accent/10', 'ring-1', 'ring-accent');
                if (label) {
                    label.classList.remove('text-slate-500');
                    label.classList.add('text-accent');
                }
            }
        }
    }

    let currentMode = 'focus'; // 'focus', 'short', 'long'
    let timeLeft = parseInt(focusVal.textContent) * 60;
    let totalTime = timeLeft;

    // Progress Ring setup
    const getCircumference = () => {
        return window.innerWidth >= 768 ? 1131 : 848;
    };

    function updateProgress() {
        const circumference = getCircumference();
        const offset = circumference - (timeLeft / totalTime) * circumference;
        progressRing.style.strokeDashoffset = offset;
    }

    function formatTime(seconds) {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    function updateUI() {
        timerDisplay.textContent = formatTime(timeLeft);
        updateProgress();
    }

    function startTimer() {
        isRunning = true;
        startBtn.innerHTML = '<span class="material-symbols-outlined">pause</span> Pause Session';
        timerInterval = setInterval(() => {
            timeLeft--;
            updateUI();
            if (timeLeft > 0) {
                playTickSound();
            }
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                isRunning = false;
                startBtn.innerHTML = '<span class="material-symbols-outlined">play_arrow</span> Start Session';
                playBellSound();
            }
        }, 1000);
    }

    function pauseTimer() {
        isRunning = false;
        clearInterval(timerInterval);
        startBtn.innerHTML = '<span class="material-symbols-outlined">play_arrow</span> Start Session';
    }

    startBtn.addEventListener('click', () => {
        if (isRunning) {
            pauseTimer();
        } else {
            startTimer();
        }
    });

    resetBtn.addEventListener('click', () => {
        pauseTimer();
        const duration = parseInt(document.getElementById(`${currentMode}-val`).textContent);
        timeLeft = duration * 60;
        totalTime = timeLeft;
        updateUI();
    });

    function setupAdjustment(type) {
        const minus = document.getElementById(`${type}-minus`);
        const plus = document.getElementById(`${type}-plus`);
        const valEl = document.getElementById(`${type}-val`);

        minus.addEventListener('click', (e) => {
            e.stopPropagation();
            let val = parseInt(valEl.textContent);
            if (val > 1) {
                val--;
                valEl.textContent = val.toString().padStart(2, '0');
                if (!isRunning && currentMode === type) {
                    timeLeft = val * 60;
                    totalTime = timeLeft;
                    updateUI();
                }
            }
        });

        plus.addEventListener('click', (e) => {
            e.stopPropagation();
            let val = parseInt(valEl.textContent);
            if (val < 60) {
                val++;
                valEl.textContent = val.toString().padStart(2, '0');
                if (!isRunning && currentMode === type) {
                    timeLeft = val * 60;
                    totalTime = timeLeft;
                    updateUI();
                }
            }
        });

        // Click the whole card to switch mode
        valEl.closest('.group').addEventListener('click', () => {
            if (!isRunning) {
                currentMode = type;
                timeLeft = parseInt(valEl.textContent) * 60;
                totalTime = timeLeft;
                updateUI();
                updateModeDisplay();
            }
        });
    }

    setupAdjustment('focus');
    setupAdjustment('short');
    setupAdjustment('long');

    // Initial UI state
    updateUI();
    updateModeDisplay();
    window.addEventListener('resize', updateProgress);
</script></body></html>